<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🏛️ 곡성군 AI 민원상담봇</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'gokseong': {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        }
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🏛️</text></svg>">
    <meta name="theme-color" content="#0ea5e9">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="곡성군 AI상담">
</head>
<body class="bg-gray-50 font-inter">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <div class="text-2xl">🏛️</div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-900">곡성군 AI 민원상담봇</h1>
                        <p class="text-sm text-gray-500">24시간 언제든지 민원 상담을 받아보세요</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="settingsBtn" class="p-2 text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-cog"></i>
                    </button>
                    <button id="helpBtn" class="p-2 text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-question-circle"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Sidebar -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-xl shadow-sm border p-6 mb-6">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-12 h-12 bg-gokseong-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-robot text-gokseong-600 text-xl"></i>
                        </div>
                        <div>
                            <h3 class="font-semibold text-gray-900">AI 상담원</h3>
                            <p class="text-sm text-green-600 flex items-center">
                                <span class="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                                온라인
                            </p>
                        </div>
                    </div>
                    <p class="text-sm text-gray-600 mb-4">곡성군 민원편람 2025를 기반으로 정확한 답변을 제공합니다.</p>
                    
                    <!-- Quick Actions -->
                    <div class="space-y-2">
                        <button class="w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors text-sm">
                            <i class="fas fa-file-upload mr-2 text-gokseong-600"></i>
                            새 문서 업로드
                        </button>
                        <button class="w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors text-sm">
                            <i class="fas fa-history mr-2 text-gokseong-600"></i>
                            대화 기록
                        </button>
                        <button class="w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors text-sm">
                            <i class="fas fa-download mr-2 text-gokseong-600"></i>
                            대화 내용 저장
                        </button>
                    </div>
                </div>

                <!-- Suggested Questions -->
                <div class="bg-white rounded-xl shadow-sm border p-6">
                    <h3 class="font-semibold text-gray-900 mb-4">자주 묻는 질문</h3>
                    <div class="space-y-2" id="suggestedQuestions">
                        <button class="suggested-question w-full text-left p-3 rounded-lg hover:bg-gokseong-50 transition-colors text-sm border border-transparent hover:border-gokseong-200" data-question="주민등록 발급은 어떻게 하나요?">
                            <i class="fas fa-id-card mr-2 text-gokseong-600"></i>
                            주민등록 발급은 어떻게 하나요?
                        </button>
                        <button class="suggested-question w-full text-left p-3 rounded-lg hover:bg-gokseong-50 transition-colors text-sm border border-transparent hover:border-gokseong-200" data-question="건축허가 신청 절차를 알려주세요">
                            <i class="fas fa-building mr-2 text-gokseong-600"></i>
                            건축허가 신청 절차를 알려주세요
                        </button>
                        <button class="suggested-question w-full text-left p-3 rounded-lg hover:bg-gokseong-50 transition-colors text-sm border border-transparent hover:border-gokseong-200" data-question="세금 납부 방법을 알려주세요">
                            <i class="fas fa-credit-card mr-2 text-gokseong-600"></i>
                            세금 납부 방법을 알려주세요
                        </button>
                        <button class="suggested-question w-full text-left p-3 rounded-lg hover:bg-gokseong-50 transition-colors text-sm border border-transparent hover:border-gokseong-200" data-question="복지 혜택에는 어떤 것들이 있나요?">
                            <i class="fas fa-heart mr-2 text-gokseong-600"></i>
                            복지 혜택에는 어떤 것들이 있나요?
                        </button>
                    </div>
                </div>
            </div>

            <!-- Chat Area -->
            <div class="lg:col-span-3">
                <div class="bg-white rounded-xl shadow-sm border h-[70vh] flex flex-col">
                    <!-- Chat Header -->
                    <div class="p-6 border-b bg-gradient-to-r from-gokseong-50 to-gokseong-100 rounded-t-xl">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-gokseong-600 rounded-full flex items-center justify-center">
                                    <i class="fas fa-comments text-white text-sm"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-gray-900">AI 민원상담</h3>
                                    <p class="text-sm text-gray-600">궁금한 것을 물어보세요</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-xs text-gray-500" id="questionCount">질문 0개</span>
                                <button id="clearChat" class="p-2 text-gray-500 hover:text-gray-700 rounded-lg hover:bg-white transition-colors">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Messages Container -->
                    <div class="flex-1 overflow-y-auto p-6 space-y-4" id="messagesContainer">
                        <!-- Welcome Message -->
                        <div class="flex items-start space-x-3">
                            <div class="w-8 h-8 bg-gokseong-600 rounded-full flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-robot text-white text-sm"></i>
                            </div>
                            <div class="flex-1">
                                <div class="bg-gokseong-50 rounded-lg p-4">
                                    <p class="text-gray-800">안녕하세요! 곡성군 AI 민원상담봇입니다. 😊</p>
                                    <p class="text-gray-800 mt-2">곡성군 민원편람을 기반으로 정확한 정보를 제공해드립니다. 궁금한 것이 있으시면 언제든지 물어보세요!</p>
                                </div>
                                <p class="text-xs text-gray-500 mt-2">방금 전</p>
                            </div>
                        </div>
                    </div>

                    <!-- Input Area -->
                    <div class="p-6 border-t bg-gray-50 rounded-b-xl">
                        <div class="flex items-end space-x-3">
                            <div class="flex-1">
                                <div class="relative">
                                    <textarea
                                        id="messageInput"
                                        placeholder="민원에 대해 궁금한 것을 입력해주세요..."
                                        class="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gokseong-500 focus:border-transparent resize-none"
                                        rows="1"
                                        style="max-height: 120px;"
                                    ></textarea>
                                    <button
                                        id="sendButton"
                                        class="absolute right-2 bottom-2 w-8 h-8 bg-gokseong-600 text-white rounded-lg hover:bg-gokseong-700 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"
                                        disabled
                                    >
                                        <i class="fas fa-paper-plane text-sm"></i>
                                    </button>
                                </div>
                                <div class="flex items-center justify-between mt-2">
                                    <div class="flex items-center space-x-4">
                                        <label class="flex items-center space-x-2 text-sm text-gray-600 cursor-pointer">
                                            <input type="file" id="fileUpload" accept=".pdf" class="hidden">
                                            <i class="fas fa-paperclip text-gokseong-600"></i>
                                            <span>PDF 업로드</span>
                                        </label>
                                        <div class="flex items-center space-x-2">
                                            <i class="fas fa-key text-gray-400 text-xs"></i>
                                            <span class="text-xs text-gray-500" id="apiKeyStatus">API 키 미설정</span>
                                        </div>
                                    </div>
                                    <div class="text-xs text-gray-500">
                                        Enter로 전송, Shift+Enter로 줄바꿈
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Settings Modal -->
    <div id="settingsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-xl max-w-md w-full p-6">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-lg font-semibold text-gray-900">설정</h3>
                    <button id="closeSettings" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">OpenAI API 키</label>
                        <input
                            type="password"
                            id="apiKeyInput"
                            placeholder="sk-..."
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gokseong-500 focus:border-transparent"
                        >
                        <p class="text-xs text-gray-500 mt-1">API 키는 브라우저에 안전하게 저장됩니다.</p>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">응답 속도</label>
                        <select id="typingSpeed" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gokseong-500 focus:border-transparent">
                            <option value="0.01">빠름</option>
                            <option value="0.02" selected>보통</option>
                            <option value="0.05">느림</option>
                        </select>
                    </div>
                </div>
                
                <div class="flex space-x-3 mt-6">
                    <button id="saveSettings" class="flex-1 bg-gokseong-600 text-white py-2 px-4 rounded-lg hover:bg-gokseong-700 transition-colors">
                        저장
                    </button>
                    <button id="cancelSettings" class="flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors">
                        취소
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-xl max-w-lg w-full p-6">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-lg font-semibold text-gray-900">도움말</h3>
                    <button id="closeHelp" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <h4 class="font-medium text-gray-900 mb-2">사용법</h4>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>• 궁금한 민원 내용을 입력하고 전송하세요</li>
                            <li>• 왼쪽의 자주 묻는 질문을 클릭해보세요</li>
                            <li>• PDF 파일을 업로드하여 추가 정보를 제공할 수 있습니다</li>
                            <li>• Enter키로 메시지 전송, Shift+Enter로 줄바꿈</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h4 class="font-medium text-gray-900 mb-2">주요 기능</h4>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>• AI 기반 실시간 민원 상담</li>
                            <li>• 곡성군 민원편람 기반 정확한 정보 제공</li>
                            <li>• PDF 문서 업로드 및 분석</li>
                            <li>• 대화 기록 저장 및 관리</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black bg-opacity-50 hidden z-40">
        <div class="flex items-center justify-center min-h-screen">
            <div class="bg-white rounded-lg p-6 flex items-center space-x-3">
                <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-gokseong-600"></div>
                <span class="text-gray-700">처리 중...</span>
            </div>
        </div>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/main.js"></script>
</body>
</html>